{% extends 'layout.html' %}

{% block content %}
  {% if org %}
    <p>Hello, <a href="#{{ org|squishName }}">{{ org }}</a> member.</p>
  {% else %}
    <p>Welcome to the Hive Member Directory. If you log in using an
    email address registered for your organization, you can view
    members-only information and edit your organization's record.</p>
  {% endif %}
  {% for row in sheet.rows %}
    <h2 id="{{ row.val('Name of Organization')|squishName }}">
      <a href="#{{ row.val('Name of Organization')|squishName }}">
        {{ row.val('Name of Organization') }}
      </a>
    </h2>
    <div class="org-url">
      <a href="{{ row.val('URL')|normalizeURL }}">
        {{ row.val('URL')|domain }}
      </a>
    </div>
    <div>
      {% if row.val('Hive Member Since') %}
      <span class="label secondary">
        Hive member since {{ row.val('Hive Member Since') }}
      </span>
      {% endif %}
    </div>
    <div class="org-mission">{{ row.val('Organizational Mission') }}</div>
    {% if sheet.canView %}
      {% if row.val('Contact 1') %}
      <h4 class="subheader">Contact</h4>
      <div class="org-contact">{{ row.val('Contact 1') }}</div>
      {% endif %}
    {% endif %}
    {% if row.isEditable %}
      {% include "edit.html" %}
    {% endif %}
  {% endfor %}
{% endblock %}

{% block scripts %}
  <script src="/js/directory.js"></script>
{% endblock %}
